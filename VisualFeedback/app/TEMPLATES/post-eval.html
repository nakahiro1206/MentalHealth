<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>「こまめなストレス発散における視覚的フィードバックの選択傾向に関する調査分析」調査用ページ</title>
        <meta name="description" content="tendency of visual feedback choice">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Bootstrap core CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="./static/src/style.css" rel="stylesheet">
    </head>
    <body class="bg-faded">
        <main class="myForm w-100 m-auto">
            <div class="border-top border-bottom border-3 border-dark borderFrame">
                <h1 class="mt-3 mb-3">ストレスと感情についてのアンケート</h1>
                <form action="/repeat_check" method="post" class="was-validated" name="myForm">
                    <div class="mt-3 mb-3 scroll-container">
                    <div style="width:90%; " class="m-auto">
                        <!-- 1. evaluate your stress level -->
                        <div>
                            <div class="mt-3">1. 体験したフィードバックについて</div>
                            <div>
                                <label for="f1" class="form-label w-100 mt-3">
                                    Q1-1: ストレス発散の効果は
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても効果的</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="f1" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="f1" value="6"></span>
                                </div>
                            </div>
                            <div>
                                <label for="f2" class="form-label">Q1-2: この選択肢を選んだ理由</label>
                                <textarea class="form-control" name="f2" id="f2" required></textarea>
                                <div class="invalid-feedback">文章を入力してください。</div>
                            </div>
                        </div>

                        <div>
                            <div class="mt-3">2. 記述したストレスについて</div>
                            <!-- Q1 -->
                            <div id="stress-q1">
                                <label for="q1" class="form-label w-100 mt-3">
                                    Q2-1: ストレスの大小は
                                        <!-- from 0 to 6. displayed value: <span class="badge bg-light text-dark" id="badge"></span> -->
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全く強くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="input-group has-validation">
                                    <div class="w-100 d-flex justify-content-between mb-3">
                                        <span><input class="form-check-input" type="radio" name="q1" value="0"></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="1""></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="2"></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="3"></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="4"></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="5"></span>
                                        <span><input class="form-check-input" type="radio" name="q1" value="6"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Q2 -->
                            <div>
                                <label for="q2" class="form-label w-100 mt-3">
                                    Q2-2: ストレスのもと・原因をなくすことは
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全く難しくない</span>
                                        <span class ="col text-end">とても難しい</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="q2" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="q2" value="6"></span>
                                </div>
                            </div>

                            <!-- Q3 -->
                            <div>
                                <label for="q3" class="form-label w-100 mt-3">
                                    Q2-3: ストレスの原因は自分自身にある
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くそう思わない</span>
                                        <span class ="col text-end">とてもそう思う</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="q3" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="q3" value="6"></span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="mt-3">3. 記述したストレスによる感情について</div>
                            <!-- e1 -->
                            <div id="emotion-q1">
                                <label for="e1" class="form-label w-100 mt-3">
                                    Q3-1: 怒り
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="e1" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="e1" value="6"></span>
                                </div>
                            </div>

                            <!-- e2 -->
                            <div>
                                <label for="e2" class="form-label w-100 mt-3">
                                    Q3-2: 悲しみ
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="e2" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="e2" value="6"></span>
                                </div>
                            </div>

                            <!-- e3 -->
                            <div>
                                <label for="e3" class="form-label w-100 mt-3">
                                    Q3-3: 恐怖感
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="e3" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="e3" value="6"></span>
                                </div>
                            </div>

                            <!-- e4 -->
                            <div>
                                <label for="e4" class="form-label w-100 mt-3">
                                    Q3-4: 恥ずかしさ
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="e4" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="e4" value="6"></span>
                                </div>
                            </div>

                            <!-- e5 -->
                            <div>
                                <label for="e5" class="form-label w-100 mt-3">
                                    Q3-5: 疲労感
                                    <div class="w-100 row mt-3">
                                        <span class ="col">全くない</span>
                                        <span class ="col text-end">とても強い</span>
                                    </div>
                                </label>
                                <div class="w-100 d-flex justify-content-between mb-3">
                                    <span><input class="form-check-input" type="radio" name="e5" value="0"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="1"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="2"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="3"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="4"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="5"></span>
                                    <span><input class="form-check-input" type="radio" name="e5" value="6"></span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 row">
                            <div class="col"></div>
                            <div class="col text-end">
                                <button type="button" class="btn btn-primary" id="submitButton" onclick="Submit()" disabled>提出</button>
                            </div>
                        </div>
                    </div>
                    </div>
                </form>
            </div>
        </main>
        <script>
            const Questions = {{questions|tojson}};
            const radioQuestionsId = ["q1","q2","q3","e1","e2","e3","e4","e5"];
            for(let i=0;i<radioQuestionsId.length;i++){
                const name = radioQuestionsId[i];
                const val = Questions[i];
                if(val==""){continue;}
                const myForm = document.myForm;
                const List = eval(`myForm.${name}`);
                List[Number(val)].checked = true;
            };
            const submitButton = document.querySelector("#submitButton");
            const endButton = document.querySelector("#endButton");
            document.querySelector(".scroll-container").addEventListener("change",()=>{
                const myForm = document.myForm;
                function check(name){
                    const List = eval(`myForm.${name}`);
                    for(let i=0;i<List.length;i++){
                        if(List[i].checked){return true;}
                    }
                    return false;
                }
                const questions = ["q1","q2","q3","e1","e2","e3","e4","e5","f1"];
                for(let i=0;i<questions.length;i++){
                    if(!check(questions[i])){return 0;}
                }
                if(myForm.f2 != undefined){
                    if(myForm.f2.value.length ==0){return 0;}
                }
                submitButton.disabled = false;
            });
            function Submit(){
                submitButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>終了';
                submitButton.disabled = true;
                document.myForm.submit();
            }
        </script>
        <script src="./static/src/style.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>